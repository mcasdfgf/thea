# 5. The Cognitive Probes

**Module:** `nexus_tools/cmd_probes.py`
**`Nexus` Commands:** `plan`, `probe`

## Purpose

The Cognitive Probes are tools for the isolated testing of the system's key thought cycles without running the full, resource-intensive core. They allow for rapid debugging and tuning of prompts, as well as verification of the memory recall mechanisms.

All probes work **exclusively with the LLM and the `Nexus` modules**, not requiring a running `main.py` or `orchestrator.py`.

> ⚠️ **Note for the Demo Version:** The `plan` and `probe` commands emulate the system's "live" thought processes and require access to the full cognitive core (including services and the LLM interface). In this demo repository, which is designed for analyzing a pre-existing "memory snapshot," these commands are disabled.

## The `plan` Command

The `plan` probe allows you to test the first, most critical part of the cognitive cycle: **"Instinct -> Enrichment Plan"**. It shows how the system initially reacts to a user's query and what search queries it formulates to access its memory.

### Usage
```
[NEXUS]> plan "<ImpulseText>" [--history <FilePath>]
```
-   `<ImpulseText>`: The user's query text you want to test. Must be enclosed in quotes.
-   `--history <FilePath>` (optional): The path to a `.json` file containing the dialogue history. This allows you to check how the system resolves context.

### Interpreting the Output
The output is divided into two stages:
1.  **`Step 1: Instinct Generation`**: Shows the quick, "instinctive" response generated by the `SimpleExecutorService`. This is what the system "thought" first.
2.  **`Step 2: Enrichment Planning`**: Demonstrates the result of the `EnrichmentPlannerService`. Here, you see the final JSON plan with `semantic_query` and `concepts`—these are the exact queries the system would send to its long-term memory to enrich its answer.

## The `probe` Command

The `probe` command is designed for direct testing of the memory recall mechanisms and for emulating the full response cycle.

### Usage
```
[NEXUS]> probe <mode> "<query>"
```
-   `<mode>`: Specifies what exactly to test.
-   `<query>`: The search query or impulse, enclosed in quotes.

### Modes of Operation

#### `probe memory "<query>"`
**Direct test of memory recall.** This mode directly invokes the `MemoryRecallService` with your query.
-   **What happens:** It executes the full recall cycle (semantic search, concept-based search), ranks the results, and synthesizes a final summary from the memory fragments it found.
-   **When to use:** To check the performance of `MemoryRecallService`, tune the ranking weights, and analyze the relevance of retrieved nodes.

#### `probe full "<query>"`
**Emulation of the full cognitive cycle.** This mode simulates the entire chain the system goes through to answer a user.
-   **What happens:** It sequentially executes all four steps:
    1.  **Instinct:** Generation of a quick response.
    2.  **Enrichment Plan:** Creation of a search plan.
    3.  **Memory Recall:** Execution of search queries against the memory.
    4.  **Final Synthesis:** Assembly of a final answer based on the instinct and the data retrieved from memory.
-   **When to use:** For a comprehensive, end-to-end check of the entire thought process in a controlled environment.
