# 1. Интерактивная Консоль `Nexus`

**Файл:** `nexus.py`

`Nexus` — это центральный командный мостик, предоставляющий единый, интерактивный интерфейс для всех диагностических инструментов.

## Назначение

-   **Эффективность:** Граф UniversalMemory загружается в память только один раз при запуске, что делает выполнение всех последующих команд мгновенным.
-   **Интерактивность:** Позволяет "путешествовать" по графу, переходя от узла к узлу с помощью числовых команд в специальном Навигационном Режиме.
-   **Расширяемость:** Консоль автоматически находит и загружает все инструменты из директории nexus_tools, что упрощает добавление новых команд.
-   **Удобство:** Все инструменты доступны через короткие, интуитивно понятные команды со встроенной справкой (--help).

## Запуск

```bash
python nexus.py
```

После запуска появится приветственное сообщение, статистика по графу и приглашение для ввода команд: `[NEXUS]>`.

## Основные Команды

| Команда (и алиас) | Описание |
| :--- | :--- |
| `help` (или `h`) | Показывает список всех доступных команд, сгруппированных по категориям. |
| `exit`, `quit` (или `q`) | Завершает сессию `Nexus`. |
| `refresh` (или `r`) | Перезагружает граф памяти из файла `memory_core.graphml` без перезапуска консоли. |
| `stat` | Отображает статистику по загруженному графу: общее количество узлов, ребер и их разбивку по типам. |
| `back` (или `b`) | В *Навигационном Режиме* позволяет вернуться к предыдущему узлу в истории навигации. |
| `reset` (или `x`) | Сбрасывает контекст навигации и выходит из *Навигационного Режима*. |

> **Подсказка:** Для получения детальной справки по любой команде (например, `list`), введите `<команда> --help`. Например: `list --help`.

## Интерактивная Навигация

Это ключевая особенность `Nexus`, превращающая анализ графа в интерактивное исследование.

1.  **Вход в режим:** Начните с команды `get <id_узла>`, чтобы посмотреть детали узла.
2.  **Изменение контекста:** Как только узел успешно найден, `Nexus` переходит в *Навигационный Режим*. Приглашение для ввода изменится, показывая ID текущего узла: `[NEXUS:a1b2c3d4]>`. В выводе появится пронумерованный список << INCOMING EDGES (Predecessors) (узлы, ссылающиеся на текущий) и >> OUTGOING EDGES (Successors) (узлы, на которые ссылается текущий).
3.  **Переход:** Просто введите **цифру**, соответствующую интересующему вас соседу, и нажмите Enter. `Nexus` автоматически выполнит команду `get` для этого нового узла, перемещая вас по графу.
4.  **Возврат и выход:** Используйте команды `back` (или `b`) для возврата на предыдущий шаг или `reset` (или `x`) для выхода из режима навигации.

Этот механизм позволяет легко и быстро исследовать связи в графе, "перепрыгивая" от одного узла к другому.

## Плагинная Архитектура

`Nexus` автоматически сканирует директорию `nexus_tools/` и загружает все файлы, начинающиеся с `cmd_`, как модули с командами. Каждый такой модуль "регистрирует" одну или несколько команд, их псевдонимы, текст справки и логику выполнения.

Это позволяет легко добавлять новые инструменты, не изменяя код самого `nexus.py`. Вся логика команд `trace`, `list`, `get`, `insights`, `probe` и `plan` реализована именно в виде таких плагинов.
